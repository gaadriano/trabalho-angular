<div class="container-lg">
    <div class="opcoes">
        <button type="button" class="btn btn-primary btn-sm" routerLink="agenda">Novo registro</button>
        <button type="button" class="btn btn-secondary btn-sm refresh" (click)="onRefresh()">Refresh</button>
    </div>

    <div class="listagem">
        <table class="table table-striped table-hover" *ngIf="agenda$ | async as agenda; else loadingError">
            <thead>
                <tr>
                    <th>Registro</th>
                    <th>Nome</th>
                    <th>Telefone</th>
                    <th>E-mail</th>
                    <th>Empresa</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
            <tr *ngFor="let item of agenda">
                <td>{{item.id}}</td>
                <td>{{item.nome}}</td>
                <td>{{item.telefone}}</td>
                <td>{{item.email}}</td>
                <td>{{item.empresa}}</td>
                <td>
                    <span>
                        <button type="button" class="btn btn-warning btn-sm" (click)="onEdit(item.id)">Atualizar</button>
                        {{''}}
                        <button type="button" class="btn btn-danger btn-sm" (click)="onDelete(item.id)">Deletar</button>
                    </span>
                </td>
            </tr>
            </tbody>
        </table>
        
        <ng-template #loadingError>
            <div *ngIf="error$ | async; else loading" >
                Erro ao carregar agenda, tente novamente mais tarde...
            </div>
            <ng-template #loading>
                <span>Carregando agenda...</span>
            </ng-template>
        </ng-template>
    </div>
</div>